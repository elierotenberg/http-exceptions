"use strict";

require("6to5/polyfill");
var Promise = require("bluebird");
var _ = require("lodash-next");
var HTTPError = require("./HTTPError");

// 4XX Client Errors
var BadRequest = HTTPError.extend(400, "Bad Request", "BadRequest");
var Unauthorized = HTTPError.extend(401, "Unauthorized", "Unauthorized");
var Forbidden = HTTPError.extend(403, "Forbidden", "Forbidden");
var NotFound = HTTPError.extend(404, "Not Found", "NotFound");
var TooManyRequests = HTTPError.extend(429, "Too Many Requests", "TooManyRequests");

// 5XX Server Errors
var InternalServerError = HTTPError.extend(500, "Internal Server Error", "InternalServerError");
var ServiceUnavailable = HTTPError.extend(503, "Service Unavailable", "ServiceUnavailable");

function forward(res, err) {
  _.dev(function () {
    return res.should.be.an.Object && res.status.should.be.a.Function && res.json.should.be.a.Function && err.should.be.an.instanceOf(HTTPError);
  });
  res.status(err.getStatusCode()).json({ code: err.getStatusCode(), err: err.getStatusText(), reason: err.getReason() });
}

module.exports = {
  HTTPError: HTTPError,

  BadRequest: BadRequest,
  Unauthorized: Unauthorized,
  Forbidden: Forbidden,
  NotFound: NotFound,
  TooManyRequests: TooManyRequests,

  InternalServerError: InternalServerError,
  ServiceUnavailable: ServiceUnavailable,

  forward: forward };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBQ3pCLElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNsQyxJQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUM7QUFDakMsSUFBTSxTQUFTLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDOzs7QUFHekMsSUFBTSxVQUFVLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsYUFBYSxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQ3RFLElBQU0sWUFBWSxHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLGNBQWMsRUFBRSxjQUFjLENBQUMsQ0FBQztBQUMzRSxJQUFNLFNBQVMsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxXQUFXLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDbEUsSUFBTSxRQUFRLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsV0FBVyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQ2hFLElBQU0sZUFBZSxHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLG1CQUFtQixFQUFFLGlCQUFpQixDQUFDLENBQUM7OztBQUd0RixJQUFNLG1CQUFtQixHQUFHLFNBQVMsQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLHVCQUF1QixFQUFFLHFCQUFxQixDQUFDLENBQUM7QUFDbEcsSUFBTSxrQkFBa0IsR0FBRyxTQUFTLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxxQkFBcUIsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDOztBQUU5RixTQUFTLE9BQU8sQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFO0FBQ3pCLEdBQUMsQ0FBQyxHQUFHLENBQUM7V0FBTSxHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsTUFBTSxJQUNqQyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFFBQVEsSUFDL0IsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLElBQzdCLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDO0dBQUEsQ0FDdkMsQ0FBQztBQUNGOzs7O0FBSUEsYUFBQSxTQUFTOztBQUVULGNBQUEsVUFBVTtBQUNWLGdCQUFBLFlBQVk7QUFDWixhQUFBLFNBQVM7QUFDVCxZQUFBLFFBQVE7QUFDUixtQkFBQSxlQUFlOztBQUVmLHVCQUFBLG1CQUFtQjtBQUNuQixzQkFBQSxrQkFBa0I7O0FBRWxCLFdBQUEsT0FBTyxFQUNSLENBQUMiLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoLW5leHQnKTtcbmNvbnN0IEhUVFBFcnJvciA9IHJlcXVpcmUoJy4vSFRUUEVycm9yJyk7XG5cbi8vIDRYWCBDbGllbnQgRXJyb3JzXG5jb25zdCBCYWRSZXF1ZXN0ID0gSFRUUEVycm9yLmV4dGVuZCg0MDAsICdCYWQgUmVxdWVzdCcsICdCYWRSZXF1ZXN0Jyk7XG5jb25zdCBVbmF1dGhvcml6ZWQgPSBIVFRQRXJyb3IuZXh0ZW5kKDQwMSwgJ1VuYXV0aG9yaXplZCcsICdVbmF1dGhvcml6ZWQnKTtcbmNvbnN0IEZvcmJpZGRlbiA9IEhUVFBFcnJvci5leHRlbmQoNDAzLCAnRm9yYmlkZGVuJywgJ0ZvcmJpZGRlbicpO1xuY29uc3QgTm90Rm91bmQgPSBIVFRQRXJyb3IuZXh0ZW5kKDQwNCwgJ05vdCBGb3VuZCcsICdOb3RGb3VuZCcpO1xuY29uc3QgVG9vTWFueVJlcXVlc3RzID0gSFRUUEVycm9yLmV4dGVuZCg0MjksICdUb28gTWFueSBSZXF1ZXN0cycsICdUb29NYW55UmVxdWVzdHMnKTtcblxuLy8gNVhYIFNlcnZlciBFcnJvcnNcbmNvbnN0IEludGVybmFsU2VydmVyRXJyb3IgPSBIVFRQRXJyb3IuZXh0ZW5kKDUwMCwgJ0ludGVybmFsIFNlcnZlciBFcnJvcicsICdJbnRlcm5hbFNlcnZlckVycm9yJyk7XG5jb25zdCBTZXJ2aWNlVW5hdmFpbGFibGUgPSBIVFRQRXJyb3IuZXh0ZW5kKDUwMywgJ1NlcnZpY2UgVW5hdmFpbGFibGUnLCAnU2VydmljZVVuYXZhaWxhYmxlJyk7XG5cbmZ1bmN0aW9uIGZvcndhcmQocmVzLCBlcnIpIHtcbiAgXy5kZXYoKCkgPT4gcmVzLnNob3VsZC5iZS5hbi5PYmplY3QgJiZcbiAgICByZXMuc3RhdHVzLnNob3VsZC5iZS5hLkZ1bmN0aW9uICYmXG4gICAgcmVzLmpzb24uc2hvdWxkLmJlLmEuRnVuY3Rpb24gJiZcbiAgICBlcnIuc2hvdWxkLmJlLmFuLmluc3RhbmNlT2YoSFRUUEVycm9yKVxuICApO1xuICByZXMuc3RhdHVzKGVyci5nZXRTdGF0dXNDb2RlKCkpLmpzb24oeyBjb2RlOiBlcnIuZ2V0U3RhdHVzQ29kZSgpLCBlcnI6IGVyci5nZXRTdGF0dXNUZXh0KCksIHJlYXNvbjogZXJyLmdldFJlYXNvbigpIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgSFRUUEVycm9yLFxuXG4gIEJhZFJlcXVlc3QsXG4gIFVuYXV0aG9yaXplZCxcbiAgRm9yYmlkZGVuLFxuICBOb3RGb3VuZCxcbiAgVG9vTWFueVJlcXVlc3RzLFxuXG4gIEludGVybmFsU2VydmVyRXJyb3IsXG4gIFNlcnZpY2VVbmF2YWlsYWJsZSxcblxuICBmb3J3YXJkLFxufTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==